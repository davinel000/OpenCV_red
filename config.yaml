camera:
  index: 1
  width: 1280  
  height: 720
  fps: 30
  # Optional: set to a video file path for offline testing
  video_file: null

roi:
  # "aruco" or "manual"
  mode: "manual"
  # Warp output size (square)
  warp_size: 1000
  # Used only in aruco mode
  aruco_dictionary: "DICT_4X4_50"
  # Order matters: top-left, top-right, bottom-right, bottom-left
  aruco_ids: [0, 1, 2, 3]
  # Cache for manual 4-point selection
  roi_cache_path: "roi_points.json"

preview:
  show_raw: true
  show_warp: true
  show_fps: true
  show_diff: true
  show_mask: true
  show_overlay: true
  # Initial size for each preview window (pixels)
  window_size: 500
  # If true, show a single mosaic window instead of multiple windows
  mosaic: true
  # Show runtime controls window with trackbars
  show_controls: true
  # Minimal controls (fewer sliders, simpler tuning)
  simple_controls: false

baseline:
  # Path to save/load baseline image (warped ROI)
  path: "baseline.png"
  # Capture baseline as an average of N frames
  capture_frames: 30
  # Delay between baseline capture frames (ms)
  capture_delay_ms: 10

detection:
  # "contrast" or "red"
  mode: "contrast"
  # If true, only preview all changes (no counting, no freeze)
  preview_all: false
  # If true, preview filtered detections but do not count
  preview_only: false
  blur_ksize: 5
  diff_threshold: 20 # 30
  morph_open_ksize: 3
  morph_close_ksize: 3
  # Illumination normalization (contrast mode)
  use_clahe: false
  clahe_clip: 2.0
  clahe_grid: 8
  min_area: 100 #200
  max_area: 50000
  use_aspect: false #true
  aspect_ratio_min: 2.0
  aspect_ratio_max: 20.0
  use_length: false # true
  # "vertical" or "any"
  orientation_mode: "vertical"
  use_orientation: true
  angle_tolerance_deg: 25
  length_min_cm: 2.0
  length_max_cm: 7.0
  # Red mode HSV thresholds (0-179 hue)
  red_hue_low1: 0
  red_hue_high1: 10
  red_hue_low2: 170
  red_hue_high2: 179
  red_sat_min: 80
  red_val_min: 50

freeze_mask:
  enabled: true
  dilate_ksize: 5

tracker:
  match_distance_px: 40
  min_persist_frames: 3
  cooldown_frames: 10
